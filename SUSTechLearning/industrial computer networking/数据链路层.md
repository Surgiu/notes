- 数据链路层使用的信道
	- 点对点
		- 一对一的点对点通信方式。
	- 广播信道
		- 一对多的广播通信方式，必须使用专用的共享信道协议来协调这些主机的数据发送。
- 本章主要研究的问题：
	- 在同一个局域网中，分组怎样由 host A 传到 host B, 但不经过路由器转发。
	- PPP 协议和 CSMA/CD 协议
	- 数据链路层的三个基本问题：封装成帧、透明传输和差错检测
	- 以太网 MAC 层的硬件地址
	- 适配器、转发器、网桥、以太网交换机的作用和使用场景

## 概念
- 链路&数据链路：链路(link) 是一条点到点的物理线路段，中间没有任何其他的交换结点；数据链路(data link) 除了物理线路外，还必须有通信协议来控制这些数据的传输。
- 帧

## 数据链路层三个基本问题
### 封装成帧
>[!note] 定义
>封装成帧(framing) 就是在一段数据的前后分别添加首部和尾部，然后就构成了一个帧，确定帧的界限。

- 如何进行帧定界
	- 使用控制字符（SOH 和 EOH）
	- ![[Pasted image 20241105231631.png]]

### 透明传输
无论发送什么样的比特组合的数据，这些数据都能够按照原样没有差错地通过这个数据链路层
- 如何实现透明传输
	- 字节填充法
		- ![[Pasted image 20241105231910.png]]

### 差错检测
- 在传输过程中可能会产生比特差错：1 可能会变成0 而0 也可能变成1。
- 在一段时间内，传输错误的比特占所传输比特总数的 比率称为误码率BER (Bit Error Rate)。
- 误码率与信噪比有很大的关系。
- 如何实现差错检测
	- 循环冗余检验CRC
		- 发送端
			- 先把数据划分为组。假定每组 $k$ 个比特。
			- CRC 运算在每组后面再添加供差错检测用的 n 位冗余码（FCS），然后构成一个帧发送出去。
				-  一共发送 $(k + n)$ 位
				- CRC冗余码的计算
					- 在一组后面添加 n 个0。
					- 得到的(k + n) 位的数模 2除以事先选定好的长度为 (n + 1) 位的除数 P，得出商是 Q 而余数是 R，R 是 n 位。
					- 将余数 R 作为冗余码拼接在数据M后面发送出去。
		- 接收端
			- 对收到的每一帧进行CRC 检验
			- 模 2除以同一个除数 P，若得出的余数 R = 0，则判定这个帧没有差错，就接受(accept)。
			- 若余数 $R \neq 0$，则判定这个帧有差错，就丢弃
		- ![[Pasted image 20241105233226.png]]
		- 局限：
			- 这种检测方法并不能确定究竟是哪一个或哪几个比特出现了差错。
		- 注意：
			- 循环冗余检验CRC 和帧检验序列FCS 并不等同。FCS 可以用 CRC这种方法得出，但CRC 并非 用来获得FCS 的唯一方法。
			- 可靠传输（无差错传输）、无差错接受
				-  可靠传输：数据链路层的发送端发送什么，在接收端就收到什么。
				- 凡是**接收端**数据链路层接受的帧均无差错
				- 仅用循环冗余检验CRC 差错检测技术只能做到 无差错接受
				- 传输差错
					- 比特差错
					- 传输差错：帧丢失、帧重复或帧失序等

## PPP 协议
#### PPP 协议的组成
- 一个将IP 数据报封装到串行链路的方法。
- 一个链路控制协议LCP (Link Control Protocol)。
- 一套网络控制协议NCP (Network Control Protocol)。
#### PPP 帧格式
![[Pasted image 20241106110938.png]]
## CSMA/CD 协议
- 局域网共享信道的方法
	- 静态划分信道[[物理层]]
	- 动态媒体接入控制（多点接入）
		- 随机接入
			- 所有用户可随便发送信息，这需要解决冲突的网络协议
			- 典型应用：以太网
		- 受控接入
- 适配器
	- 实现计算机 I/O 与外界局域网（电缆）的连接
	- 实现串并转换
	- 实现以太网协议